<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of INTRAEL</TITLE>
</HEAD><BODY>
<H1>INTRAEL</H1>
Section: Intrael application server (1)<BR>Updated: March 17, 2012<BR><A HREF="#index">Index</A>
<A HREF="/cgi-bin/man/man2html">Return to Main Contents</A><HR>

<P>
<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

intrael - Computer vision for the web
<P>

<I></I>
<B>intrael</B> [<I>options</I>]
<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<TT>&nbsp;&nbsp;&nbsp;</TT><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT><BR>
<BR>

<P>
<A NAME="lbAC">&nbsp;</A>
<H2>DESCRIPTION</H2>

The <B>intrael</B> server processes the depth stream from the Kinect, thresholds it and measures distinct blobs found in it. The derived data for each frame are then made available to network clients through HTTP wrapped in JSON arrays. These allow web developers to develop computer vision apps using javascript &amp; HTML. The protocol used is standard HTTP so other languages can use it as well. The raw camera frames are provided as single JPEGs, MJPEG streams and binary files all tranferable over HTTP. 
<P>
<A NAME="lbAD">&nbsp;</A>
<H2>OPTIONS</H2>

<DL COMPACT>
<DT><B>-p </B><I>PORT</I><DD>
Sets the port the server should listen to. Default is 6661.
<DT><B>-l </B><I>ADDRESS</I><DD>
<BR>&nbsp;Sets&nbsp;the&nbsp;address&nbsp;the&nbsp;server&nbsp;should&nbsp;listen&nbsp;to.&nbsp;Default&nbsp;is&nbsp;INADDR_ANY.
<DT><B>-k </B><I>DEVICE</I><DD>
<BR>&nbsp;Sets&nbsp;the&nbsp;kinect&nbsp;device&nbsp;to&nbsp;use.&nbsp;You&nbsp;can&nbsp;either&nbsp;supply&nbsp;an&nbsp;index&nbsp;id(0-9)&nbsp;or&nbsp;the&nbsp;serial&nbsp;of&nbsp;a&nbsp;specific&nbsp;kinect.&nbsp;The&nbsp;special&nbsp;value&nbsp;&quot;list&quot;&nbsp;prints&nbsp;the&nbsp;serials&nbsp;of&nbsp;all&nbsp;kinected&nbsp;kinects.&nbsp;Default&nbsp;is&nbsp;0,&nbsp;first&nbsp;device&nbsp;by&nbsp;index.
<DT><B>-u </B><I>FRAMES</I><DD>
<BR>&nbsp;The&nbsp;queue&nbsp;length&nbsp;of&nbsp;binary&nbsp;frames(600k&nbsp;each)&nbsp;to&nbsp;keep&nbsp;allocated&nbsp;to&nbsp;keep&nbsp;in&nbsp;memory&nbsp;the&nbsp;clients&nbsp;at&nbsp;any&nbsp;time.&nbsp;If&nbsp;more&nbsp;are&nbsp;needed&nbsp;because&nbsp;of&nbsp;slow&nbsp;or&nbsp;malicious&nbsp;clients,&nbsp;the&nbsp;processing&nbsp;will&nbsp;wait.&nbsp;Default&nbsp;is&nbsp;3.
<DT><B>-f </B><I>FRAMES</I><DD>
<BR>&nbsp;The&nbsp;queue&nbsp;length&nbsp;of&nbsp;json&nbsp;and&nbsp;JPEG&nbsp;frames(64k&nbsp;each)&nbsp;to&nbsp;keep&nbsp;on&nbsp;memory&nbsp;to&nbsp;feed&nbsp;the&nbsp;clients&nbsp;at&nbsp;any&nbsp;time.&nbsp;If&nbsp;more&nbsp;are&nbsp;needed&nbsp;because&nbsp;of&nbsp;slow&nbsp;or&nbsp;malicious&nbsp;clients,&nbsp;the&nbsp;processing&nbsp;will&nbsp;wait.&nbsp;Default&nbsp;is&nbsp;30.
<DT><B>-j </B><I>QUALITY</I><DD>
<BR>&nbsp;Sets&nbsp;the&nbsp;JPEG&nbsp;quality.&nbsp;Range&nbsp;is&nbsp;25-75.&nbsp;Default&nbsp;is&nbsp;75.
<DT><B>-s </B><I>SECRET</I><DD>
<BR>&nbsp;Sets&nbsp;a&nbsp;secret&nbsp;passphrase&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;securing&nbsp;the&nbsp;live&nbsp;config&nbsp;functionality&nbsp;of&nbsp;the&nbsp;server.&nbsp;If&nbsp;a&nbsp;value&nbsp;of&nbsp;'0'&nbsp;is&nbsp;provided&nbsp;the&nbsp;server&nbsp;won't&nbsp;accept&nbsp;config&nbsp;requests.&nbsp;Default&nbsp;it&nbsp;to&nbsp;allow&nbsp;them&nbsp;without&nbsp;authentication.&nbsp;&nbsp;
<DT><B>-b </B><I>FILE</I><DD>
<BR>&nbsp;Sets&nbsp;the&nbsp;filename&nbsp;to&nbsp;load&nbsp;as&nbsp;the&nbsp;background&nbsp;reference&nbsp;frame.
<DT><B>-d </B><I>FILE</I><DD>
<BR>&nbsp;Sets&nbsp;the&nbsp;filename&nbsp;to&nbsp;dump&nbsp;the&nbsp;background&nbsp;reference&nbsp;file&nbsp;to.
<DT><B>-o </B><I>FILE</I><DD>
<BR>&nbsp;Read&nbsp;a&nbsp;whitelist&nbsp;of&nbsp;origins&nbsp;allowed&nbsp;to&nbsp;connect&nbsp;to&nbsp;the&nbsp;server&nbsp;from&nbsp;the&nbsp;specified&nbsp;file.&nbsp;Default&nbsp;is&nbsp;to&nbsp;allow&nbsp;all&nbsp;origins.
<DT><B>-O </B><I>ORIGIN</I><DD>
<BR>&nbsp;Only&nbsp;this&nbsp;origin&nbsp;will&nbsp;be&nbsp;allowed&nbsp;to&nbsp;issue&nbsp;config&nbsp;requests.
<DT><B>-i </B><I>FILE</I><DD>
<BR>&nbsp;Read&nbsp;a&nbsp;whitelist&nbsp;of&nbsp;IPs&nbsp;allowed&nbsp;to&nbsp;connect&nbsp;to&nbsp;the&nbsp;server&nbsp;from&nbsp;the&nbsp;specified&nbsp;file.&nbsp;Default&nbsp;is&nbsp;to&nbsp;allow&nbsp;all&nbsp;IPs.
<DT><B>-I </B><I>ADDRESS</I><DD>
<BR>&nbsp;Only&nbsp;this&nbsp;IP&nbsp;address&nbsp;will&nbsp;be&nbsp;allowed&nbsp;to&nbsp;issue&nbsp;config&nbsp;requests.
<DT><B>-m </B><I>CONNS</I><DD>
<BR>&nbsp;Max&nbsp;number&nbsp;of&nbsp;connections&nbsp;per&nbsp;IP&nbsp;address&nbsp;that&nbsp;will&nbsp;be&nbsp;allowed&nbsp;to&nbsp;connect&nbsp;to&nbsp;the&nbsp;server.
<DT><B>-n</B><DD>
<BR>&nbsp;No&nbsp;rgb&nbsp;video.&nbsp;Disables&nbsp;the&nbsp;rgb&nbsp;camera&nbsp;and&nbsp;gives&nbsp;a&nbsp;small&nbsp;performance&nbsp;boost&nbsp;overall.
<DT><B>-v</B><DD>
<BR>&nbsp;Prints&nbsp;the&nbsp;version&nbsp;of&nbsp;the&nbsp;program.
<P>
<DT><B> The following options can also be changed live through http requests</B><DD>
<P>
<P>
<DT><B>-e </B><I>INT</I><DD>
<BR>&nbsp;Background&nbsp;extraction.&nbsp;This&nbsp;option&nbsp;controls&nbsp;the&nbsp;mode&nbsp;of&nbsp;operation&nbsp;for&nbsp;the&nbsp;background&nbsp;extraction.&nbsp;A&nbsp;value&nbsp;of&nbsp;0&nbsp;disables&nbsp;extraction,&nbsp;everything&nbsp;scanned&nbsp;withing&nbsp;the&nbsp;boundaries&nbsp;described&nbsp;by&nbsp;the&nbsp;following&nbsp;options&nbsp;will&nbsp;be&nbsp;taken&nbsp;into&nbsp;account.&nbsp;A&nbsp;positive&nbsp;value&nbsp;forces&nbsp;the&nbsp;server&nbsp;to&nbsp;create&nbsp;a&nbsp;reference&nbsp;frame(controlled&nbsp;by&nbsp;the&nbsp;-r&nbsp;option,&nbsp;see&nbsp;below)&nbsp;and&nbsp;report&nbsp;just&nbsp;the&nbsp;differences&nbsp;on&nbsp;subsequent&nbsp;frames.&nbsp;A&nbsp;negative&nbsp;value&nbsp;the&nbsp;server&nbsp;also&nbsp;utiilizes&nbsp;a&nbsp;background&nbsp;frame&nbsp;but&nbsp;scans&nbsp;with&nbsp;depth&nbsp;boundaries(-z,-Z&nbsp;options)&nbsp;relative&nbsp;to&nbsp;the&nbsp;background&nbsp;frame.&nbsp;Eg&nbsp;along&nbsp;with&nbsp;-z&nbsp;30&nbsp;-Z&nbsp;120&nbsp;the&nbsp;server&nbsp;will&nbsp;scan&nbsp;for&nbsp;blobs&nbsp;that&nbsp;are&nbsp;from&nbsp;30&nbsp;to&nbsp;120&nbsp;mm&nbsp;from&nbsp;the&nbsp;wall(or&nbsp;whatever&nbsp;was&nbsp;captured&nbsp;in&nbsp;the&nbsp;background&nbsp;frame).&nbsp;In&nbsp;addition,&nbsp;the&nbsp;absolute&nbsp;value&nbsp;of&nbsp;the&nbsp;option&nbsp;acts&nbsp;as&nbsp;a&nbsp;safety&nbsp;margin&nbsp;that&nbsp;helps&nbsp;to&nbsp;clear&nbsp;noise&nbsp;that&nbsp;results&nbsp;from&nbsp;the&nbsp;instability&nbsp;of&nbsp;depth&nbsp;reporting&nbsp;from&nbsp;the&nbsp;kinect.&nbsp;Start&nbsp;low&nbsp;and&nbsp;raise&nbsp;until&nbsp;the&nbsp;result&nbsp;satisfies.&nbsp;The&nbsp;default&nbsp;value&nbsp;is&nbsp;0,&nbsp;no&nbsp;extraction.
<DT><B>-r </B><I>FRAMES</I><DD>
<BR>&nbsp;Set&nbsp;the&nbsp;number&nbsp;of&nbsp;frames&nbsp;to&nbsp;take&nbsp;into&nbsp;account&nbsp;while&nbsp;creating&nbsp;the&nbsp;background&nbsp;reference&nbsp;frame.&nbsp;Range&nbsp;is&nbsp;1-999.&nbsp;Processing&nbsp;multiple&nbsp;frames&nbsp;leads&nbsp;to&nbsp;better&nbsp;quality&nbsp;of&nbsp;the&nbsp;reference&nbsp;frame&nbsp;and&nbsp;the&nbsp;extraction&nbsp;process(See&nbsp;above).&nbsp;While&nbsp;constructing&nbsp;the&nbsp;reference&nbsp;frame&nbsp;the&nbsp;kinect's&nbsp;led&nbsp;will&nbsp;blink&nbsp;orange-red.&nbsp;Range&nbsp;is&nbsp;1-9999.&nbsp;The&nbsp;default&nbsp;is&nbsp;30,&nbsp;about&nbsp;one&nbsp;second&nbsp;worth&nbsp;of&nbsp;frames.
<DT><B>-x </B><I>PIXEL</I><DD>
<BR>&nbsp;Set&nbsp;the&nbsp;lower&nbsp;bound&nbsp;for&nbsp;the&nbsp;X&nbsp;axis&nbsp;scan.&nbsp;Range&nbsp;is&nbsp;0-632.&nbsp;Will&nbsp;be&nbsp;rounded&nbsp;to&nbsp;a&nbsp;multiple&nbsp;of&nbsp;8.&nbsp;Default&nbsp;is&nbsp;0.
<DT><B>-X </B><I>PIXEL</I><DD>
<BR>&nbsp;Set&nbsp;the&nbsp;higher&nbsp;bound&nbsp;for&nbsp;the&nbsp;X&nbsp;axis&nbsp;scan.&nbsp;Range&nbsp;is&nbsp;0-632.&nbsp;Will&nbsp;be&nbsp;rounded&nbsp;to&nbsp;a&nbsp;multiple&nbsp;of&nbsp;8.&nbsp;Default&nbsp;is&nbsp;632.
<DT><B>-y </B><I>PIXEL</I><DD>
<BR>&nbsp;Set&nbsp;the&nbsp;lower&nbsp;bound&nbsp;for&nbsp;the&nbsp;Y&nbsp;axis&nbsp;scan.&nbsp;Range&nbsp;is&nbsp;0-478.&nbsp;Default&nbsp;is&nbsp;0.
<DT><B>-Y </B><I>PIXEL</I><DD>
<BR>&nbsp;Set&nbsp;the&nbsp;higher&nbsp;bound&nbsp;for&nbsp;the&nbsp;Y&nbsp;axis&nbsp;scan.&nbsp;Range&nbsp;is&nbsp;0-479.&nbsp;Default&nbsp;is&nbsp;479.
<DT><B>-z </B><I>MILLIMETRES</I><DD>
<BR>&nbsp;Set&nbsp;the&nbsp;low&nbsp;threshold&nbsp;for&nbsp;the&nbsp;Y&nbsp;axis(depth)&nbsp;scan&nbsp;in&nbsp;mm.&nbsp;Range&nbsp;is&nbsp;0-9999.&nbsp;Default&nbsp;is&nbsp;30.
<DT><B>-Z </B><I>MILLIMETRES</I><DD>
<BR>&nbsp;Set&nbsp;the&nbsp;high&nbsp;threshold&nbsp;for&nbsp;the&nbsp;Y&nbsp;axis&nbsp;scan&nbsp;in&nbsp;mm.&nbsp;Range&nbsp;is&nbsp;1-9999.&nbsp;Default&nbsp;is&nbsp;1340.
<DT><B>-c </B><I>PIXELS</I><DD>
<BR>&nbsp;Set&nbsp;the&nbsp;minimum&nbsp;pixel&nbsp;count&nbsp;for&nbsp;an&nbsp;object&nbsp;to&nbsp;be&nbsp;reported.&nbsp;Range&nbsp;is&nbsp;1-300000.&nbsp;Default&nbsp;is&nbsp;1024.
<DT><B>-C </B><I>PIXELS</I><DD>
<BR>&nbsp;Set&nbsp;the&nbsp;maximum&nbsp;pixel&nbsp;count&nbsp;for&nbsp;an&nbsp;object&nbsp;to&nbsp;be&nbsp;reported.&nbsp;Default&nbsp;is&nbsp;0,&nbsp;check&nbsp;disabled.
<DT><B>-b </B><I>DUMMY</I><DD>
<BR>&nbsp;When&nbsp;used&nbsp;in&nbsp;the&nbsp;context&nbsp;of&nbsp;live&nbsp;config(See&nbsp;below),&nbsp;it&nbsp;forces&nbsp;a&nbsp;reload&nbsp;of&nbsp;the&nbsp;reference&nbsp;frame&nbsp;from/if&nbsp;the&nbsp;file&nbsp;was&nbsp;specified&nbsp;on&nbsp;startup.&nbsp;DUMMY&nbsp;means&nbsp;that&nbsp;an&nbsp;argument&nbsp;has&nbsp;to&nbsp;be&nbsp;passed&nbsp;in&nbsp;the&nbsp;query&nbsp;string&nbsp;but&nbsp;is&nbsp;not&nbsp;taken&nbsp;into&nbsp;account.
<DT><B>-d </B><I>DUMMY</I><DD>
<BR>&nbsp;When&nbsp;used&nbsp;in&nbsp;the&nbsp;context&nbsp;of&nbsp;live&nbsp;config(See&nbsp;below),&nbsp;it&nbsp;forces&nbsp;a&nbsp;dump&nbsp;of&nbsp;the&nbsp;reference&nbsp;frame&nbsp;to/if&nbsp;the&nbsp;file&nbsp;was&nbsp;specified&nbsp;on&nbsp;startup&nbsp;with&nbsp;the&nbsp;-F&nbsp;option.&nbsp;DUMMY&nbsp;means&nbsp;that&nbsp;an&nbsp;argument&nbsp;has&nbsp;to&nbsp;be&nbsp;passed&nbsp;in&nbsp;the&nbsp;query&nbsp;string&nbsp;but&nbsp;is&nbsp;not&nbsp;taken&nbsp;into&nbsp;account.
<DT><B>-o </B><I>DUMMY</I><DD>
<BR>&nbsp;When&nbsp;used&nbsp;in&nbsp;the&nbsp;context&nbsp;of&nbsp;live&nbsp;config(See&nbsp;below),&nbsp;it&nbsp;forces&nbsp;a&nbsp;reload&nbsp;of&nbsp;the&nbsp;origin&nbsp;list&nbsp;from/if&nbsp;the&nbsp;file&nbsp;was&nbsp;specified&nbsp;on&nbsp;startup&nbsp;with&nbsp;the&nbsp;-o&nbsp;option.&nbsp;DUMMY&nbsp;means&nbsp;that&nbsp;an&nbsp;argument&nbsp;has&nbsp;to&nbsp;be&nbsp;passed&nbsp;in&nbsp;the&nbsp;query&nbsp;string&nbsp;but&nbsp;is&nbsp;not&nbsp;taken&nbsp;into&nbsp;account.
<DT><B>-i </B><I>DUMMY</I><DD>
<BR>&nbsp;When&nbsp;used&nbsp;in&nbsp;the&nbsp;context&nbsp;of&nbsp;live&nbsp;config(See&nbsp;below),&nbsp;it&nbsp;forces&nbsp;a&nbsp;reload&nbsp;of&nbsp;the&nbsp;IP&nbsp;list&nbsp;from/if&nbsp;the&nbsp;file&nbsp;was&nbsp;specified&nbsp;on&nbsp;startup&nbsp;with&nbsp;the&nbsp;-i&nbsp;option.&nbsp;DUMMY&nbsp;means&nbsp;that&nbsp;an&nbsp;argument&nbsp;has&nbsp;to&nbsp;be&nbsp;passed&nbsp;in&nbsp;the&nbsp;query&nbsp;string&nbsp;but&nbsp;is&nbsp;not&nbsp;taken&nbsp;into&nbsp;account.
<DT><B>-a </B><I>ANGLE</I><DD>
<BR>&nbsp;Moves&nbsp;the&nbsp;motor&nbsp;to&nbsp;the&nbsp;specified&nbsp;angle.&nbsp;After&nbsp;the&nbsp;motor&nbsp;moves&nbsp;to&nbsp;the&nbsp;specified&nbsp;position(Indicated&nbsp;by&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;the&nbsp;HEADER,&nbsp;see&nbsp;below)&nbsp;you&nbsp;should&nbsp;reconstruct&nbsp;the&nbsp;reference&nbsp;frame(-r&nbsp;option)&nbsp;if&nbsp;using&nbsp;background&nbsp;extraction.&nbsp;Range&nbsp;is&nbsp;-31&nbsp;to&nbsp;31.
<DT><B>-g </B><I>BOOLEAN</I><DD>
<BR>&nbsp;Toggles&nbsp;accelerometer&nbsp;readings.&nbsp;0&nbsp;disables,&nbsp;1&nbsp;enables.&nbsp;Default&nbsp;is&nbsp;enabled
<P>
</DL>
<A NAME="lbAE">&nbsp;</A>
<H2>USAGE</H2>

<P>
<DL COMPACT>
<DT>The server communicates using the http protocol. Clients retrieve the data through xmlhttprequests or the &lt;img&gt; tag wich we use to retrieve to JPEG shots or MJPEG streams. A request to http://&lt;server_ip:server_port&gt;/1x returns depth image responses. The second digit controls the rate of the response. A /10 would fetch a single JPEG while /11 activates true MJPEG streaming with a rate of 1:1 with the rate coming in from the kinect. /12 would fetch every 2nd frame halving the fps etc. You could append some additional data like a timestamp which will be ignored by the server(useful to prevent sharing of XHRs in case the same page gets to run on different tabs of the same browser)<DD>
<DT><BR>&nbsp;The&nbsp;same&nbsp;scheme&nbsp;works&nbsp;with&nbsp;the&nbsp;rgb&nbsp;cam(entry&nbsp;point&nbsp;/2x),&nbsp;binary&nbsp;blobs(/3x&nbsp;but&nbsp;the&nbsp;rate&nbsp;is&nbsp;fixed&nbsp;to&nbsp;single&nbsp;requests&nbsp;ie&nbsp;no&nbsp;streaming&nbsp;whatsoever)&nbsp;and&nbsp;the&nbsp;JSON&nbsp;data(/0x&nbsp;and&nbsp;actually&nbsp;any&nbsp;starting&nbsp;character&nbsp;besides&nbsp;1,2&nbsp;and&nbsp;3).&nbsp;In&nbsp;the&nbsp;case&nbsp;of&nbsp;json&nbsp;text&nbsp;responses&nbsp;Server&nbsp;Sent&nbsp;Events&nbsp;can,&nbsp;and&nbsp;should,&nbsp;be&nbsp;used&nbsp;instead&nbsp;of&nbsp;long&nbsp;polling&nbsp;XHR.&nbsp;Unfortunately,&nbsp;since&nbsp;browser&nbsp;vendors&nbsp;heven't&nbsp;yet&nbsp;implemented&nbsp;CORS&nbsp;for&nbsp;SSE(patches&nbsp;landing&nbsp;soon&nbsp;though)&nbsp;the&nbsp;convenience&nbsp;library&nbsp;defaults&nbsp;to&nbsp;long&nbsp;polling.&nbsp;Streaming&nbsp;can&nbsp;be&nbsp;activated&nbsp;with&nbsp;intrael.start(true)&nbsp;and&nbsp;disabling&nbsp;of&nbsp;CORS(On&nbsp;chrome&nbsp;you'll&nbsp;need&nbsp;the&nbsp;--disable-web-security&nbsp;flag).&nbsp;<DD>
<DT>By appending a query string, live configuration changes can be performed. Most command line options can be used with a form like /00?z=1000&amp;Z=2000. This example would force the engine to threshold depth from 1000 to 2000 millimetres. By default this functionality is enabled. You can disable it by specifying the option -s 0 on the command line. If -s is set to a string authentication is enabled which works as follows: The second element from the header in the JSON data output of the server(see HEADER FORMAT below) is an incrementing counter that must be concatenated with the string provided to -s (&lt;SECRET&gt;&lt;TIMESTAMP&gt;) and the result md5 hashed. The hash must then be passed along with the rest of the query arguments as an s=&lt;HASH&gt; for the rest of the commands, provided on the same query string, to take effect. After every succesful request the hash timestamp will change requiring a repeat of the process for subsequent requests. Concurrent requests from multiple clients are troublesome as only the first one will go through changing the hash and therefore blocking the rest. <DD>
<DT>Finally, the entry point /4x fetches the Depth-&gt;RGB shifting tables as binary. Useful is someone wants to perform high quality cropping of features from the RGB stream.<DD>
<P>
<P>
<P>
</DL>
<A NAME="lbAF">&nbsp;</A>
<H2>FORMAT</H2>

<BR>&nbsp;
<DL COMPACT>
<DT>Tracking data come in numeric json arrays. The convenience library(intrael.js in resources/) automatically sets up communication with the server. The raw data are neatly packed into objects as the come and provided to a listener you specify. Here is a sample of usage:<DD>
<P>
// The default address is <A HREF="http://127.0.0.1:6661.">http://127.0.0.1:6661.</A> Override that by providing another as the argument when constructing the object
<P>
var intrael = new Intrael(); 
<P>
//This handler will be called at most 30 times per second
<P>
intrael.addListener(&quot;data&quot;,function(e){
<BR>&nbsp;console.log(e.header);&nbsp;//&nbsp;Always&nbsp;16&nbsp;elements&nbsp;long
<BR>&nbsp;for(var&nbsp;i=0;&nbsp;i&nbsp;!=&nbsp;e.blobs.length;i++){&nbsp;//&nbsp;Array&nbsp;of&nbsp;blobs
<BR>&nbsp;&nbsp;console.log(e.blobs[i].left.x);&nbsp;//&nbsp;Print&nbsp;the&nbsp;leftmost&nbsp;point's&nbsp;x&nbsp;coordinate&nbsp;for&nbsp;every&nbsp;blob
<BR>&nbsp;}
});
<P>
//This will be called when connection fails
<P>
intrael.addListener(&quot;error&quot;,function(){
<BR>&nbsp;//&nbsp;Try&nbsp;to&nbsp;reconnect&nbsp;every&nbsp;5&nbsp;seconds&nbsp;in&nbsp;case&nbsp;of&nbsp;failure
<P>
<BR>&nbsp;window.setTimeout(function(){intrael.start();},5000);<TT>&nbsp;&nbsp;</TT><BR>
<P>
});
<P>
// Here goes
intrael.start();
<P>
<P>
The first 16 elements of the JSON array from the server's response will always be present, even if no blobs were detected. Each of these elements are described below by index( and the property in the packed header object):
<P>
<DT><B>0</B><DD>
Timestamp of the current frame as provided by the kinect (header.stamp).
<DT><B>1</B><DD>
Timestamp of the last configuration change. See path /0 above(header.config)
<DT><B>2</B><DD>
Background extraction mode. See -e option (header.mode).
<DT><B>3</B><DD>
Low x axis bound for the raster scan. See -x option (header.left).
<DT><B>4</B><DD>
High x axis bound for the raster scan. See -X option (header.right).
<DT><B>5</B><DD>
Low y axis bound for the raster scan. See -y option (header.top).
<DT><B>6</B><DD>
High y axis bound for the raster scan. See -Y option (header.bottom).
<DT><B>7</B><DD>
Low depth threshold. See -z option (header.near).
<DT><B>8</B><DD>
High depth threshold. See -Z option (header.far).
<DT><B>9</B><DD>
Low pixel count limit for blob filtering. See -c option (header.minpx).
<DT><B>10</B><DD>
High pixel count limit for blob filtering. See -C option (header.maxpx).
<DT><B>11</B><DD>
Accelerometer X value in G (header.ax).
<DT><B>12</B><DD>
Accelerometer Y value in G (header.ay).
<DT><B>13</B><DD>
Accelerometer Z value in G (header.az).
<DT><B>14</B><DD>
Motor angle as reported by the kinect (header.angle).
<DT><B>15</B><DD>
Motor state. 0-Not moving, 4-Moving (header.motor).
<P>
</DL>
<A NAME="lbAG">&nbsp;</A>
<H2>BLOB FORMAT</H2>

<P>
<BR>&nbsp;After&nbsp;the&nbsp;16&nbsp;elements&nbsp;of&nbsp;the&nbsp;header&nbsp;comes&nbsp;the&nbsp;information&nbsp;for&nbsp;the&nbsp;detected&nbsp;blobs&nbsp;in&nbsp;fixed&nbsp;length(32)&nbsp;element&nbsp;packs.&nbsp;The&nbsp;structure&nbsp;of&nbsp;these&nbsp;packs&nbsp;is&nbsp;described&nbsp;below&nbsp;by&nbsp;index(&nbsp;and&nbsp;the&nbsp;property&nbsp;in&nbsp;the&nbsp;packed&nbsp;blob&nbsp;object):
<P>
<DL COMPACT>
<DT><B>0</B><DD>
x coordinate of the geometric center of the object (blob.center.x).
<DT><B>1</B><DD>
y coordinate of the geometric center of the object (blob.center.y).
<DT><B>2</B><DD>
Average depth of all object's pixels (blob.center.z).
<DT><B>3</B><DD>
Background depth at the geometric center of the object (blob.center.d).
<DT><B>4</B><DD>
x coordinate of the leftmost point of the object (blob.left.x).
<DT><B>5</B><DD>
y coordinate of the leftmost point of the object (blob.left.y).
<DT><B>6</B><DD>
Depth of the leftmost point of the object (blob.left.z).
<DT><B>7</B><DD>
Background depth at the leftmost point of the object (blob.left.d).
<DT><B>8</B><DD>
x coordinate of the rightmost point of the object (blob.right.x).
<DT><B>9</B><DD>
y coordinate of the rightmost point of the object (blob.right.y).
<DT><B>10</B><DD>
Depth of the rightmost point of the object (blob.right.z).
<DT><B>11</B><DD>
Background depth at the rightmost point of the object (blob.right.d).
<DT><B>12</B><DD>
x coordinate of the topmost point of the object (blob.top.x).
<DT><B>13</B><DD>
y coordinate of the topmost point of the object (blob.top.y).
<DT><B>14</B><DD>
Depth of the topmost point of the object (blob.top.z).
<DT><B>15</B><DD>
Background depth at the topmost point of the object (blob.top.d).
<DT><B>16</B><DD>
x coordinate of the bottommost point of the object (blob.bottom.x).
<DT><B>17</B><DD>
y coordinate of the bottommost point of the object (blob.bottom.y).
<DT><B>18</B><DD>
Depth of the bottommost point of the object (blob.bottom.z).
<DT><B>19</B><DD>
Background depth at the bottommost point of the object (blob.bottom.d).
<DT><B>20</B><DD>
x coordinate of the point of the object nearest to the camera (blob.near.x).
<DT><B>21</B><DD>
y coordinate of the point of the object nearest to the camera (blob.near.y).
<DT><B>22</B><DD>
Depth of the point of the object nearest to the camera (blob.near.z).
<DT><B>23</B><DD>
Background depth at the point of the object nearest to the camera (blob.near.d).
<DT><B>24</B><DD>
x coordinate of the point of the object furthest from the camera (blob.far.x).
<DT><B>25</B><DD>
y coordinate of the point of the object furthest from the camera (blob.far.y).
<DT><B>26</B><DD>
Depth of the point of the object furthest from the camera (blob.far.z).
<DT><B>27</B><DD>
Background depth at the point of the object furthest from the camera (blob.far.d).
<DT><B>28</B><DD>
Pixel count of the object (blob.px).
<DT><B>29</B><DD>
The count of continuous horizontal lines(runs) that compose the object (blob.rs).
<DT><B>30</B><DD>
Y coordinate that indicates the area of greatest concentration of runs (blob.vr).
<DT><B>31</B><DD>
Composite x,y coordinate(640*y+x) of the location where the point corresponding to the geometric center is on the RGB image. Use it to adjust the depth image and crop features from the rgb camera (blob.dt).
<P>
<P>
</DL>
<A NAME="lbAH">&nbsp;</A>
<H2>EXAMPLES</H2>

<P>
Check <A HREF="http://www.intrael.com">http://www.intrael.com</A>
<P>
<A NAME="lbAI">&nbsp;</A>
<H2>SEE ALSO</H2>

<P>
Check <A HREF="http://www.openkinect.org">http://www.openkinect.org</A>
<P>
<P>
<A NAME="lbAJ">&nbsp;</A>
<H2>AUTHOR</H2>

<P>
Yannis Gravezas (<A HREF="mailto:wizgrav@gmail.com">wizgrav@gmail.com</A>)
<P>
<A NAME="lbAK">&nbsp;</A>
<H2>LICENSE</H2>

<P>
This file is part of the Intrael Project which provides computer vision for the web.
Copyright (C) 2012 Yannis Gravezas. You can contact the author at <A HREF="mailto:wizgrav@gmail.com">wizgrav@gmail.com</A>.
<P>
This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.
<P>
This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.
<P>
You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
<P>
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">DESCRIPTION</A><DD>
<DT><A HREF="#lbAD">OPTIONS</A><DD>
<DT><A HREF="#lbAE">USAGE</A><DD>
<DT><A HREF="#lbAF">FORMAT</A><DD>
<DT><A HREF="#lbAG">BLOB FORMAT</A><DD>
<DT><A HREF="#lbAH">EXAMPLES</A><DD>
<DT><A HREF="#lbAI">SEE ALSO</A><DD>
<DT><A HREF="#lbAJ">AUTHOR</A><DD>
<DT><A HREF="#lbAK">LICENSE</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 18:56:10 GMT, March 17, 2012
</BODY>
</HTML>
